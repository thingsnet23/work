<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from biz.yap.net/media.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Jul 2023 02:48:45 GMT -->
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/css/pc/style.css">
    <link rel="stylesheet" href="news.css">
    <script src="assets/js/library/jquery-1.12.2.min.js" type="text/javascript"></script>
    <script src="assets/js/library/jquery.easing.1.3.js"></script>
    <title>MEDIA</title>
</head>
<body>
<div class="wrap" id="wrap">
    <header id="header" class="header">
        <div class="container clearfix">
            <div class="logo back-top">
                <a href="index-2.html"><img src="assets/img/pc/logo_yap.png" alt="yap"></a>
            </div>
            <div class="header_right">
                <nav class="gnb pull-left">
                    <ul class="nav_list clearfix">
                        <li class="nav_item">
                            <a href="index-2.html#content_about" class="nav_link" data-nav=".content_about">
                                About
                            </a>
                        </li>
                        <li class="nav_item">
                            <a href="index-2.html#content_tech" class="nav_link" data-nav=".content_tech">
                                tech
                            </a>
                        </li>
                        <li class="nav_item">
                            <a href="index-2.html#content_strategy" class="nav_link" data-nav=".content_strategy">
                                BIZ
                            </a>
                        </li>
                        <li class="nav_item">
                            <a href="index-2.html#content_core" class="nav_link" data-nav=".content_core">
                                service
                            </a>
                        </li>
                        <li class="nav_item nav_pr">
                            <a href="index-2.html#content_pr" class="nav_link" data-nav=".content_pr">
                                PR
                            </a>
                            <div class="dropdown-content">
                                <a href="news.html" class="dropdown nav_news">NEWS</a>
                                <a href="media.html" class="dropdown nav_media is-active">MEDIA</a>
                            </div>
                        </li>
                        <li class="nav_item">
                            <a href="index-2.html#content_company" class="nav_link" data-nav=".content_company">
                                location
                            </a>
                        </li>
                        <li class="nav_item">
                            <a href="assets/brochure/brochure_kor.pdf" target="_blank" class="nav_link">
                                Brochure
                            </a>
                        </li>
                        <li class="nav_item">
                            <div class="select_lang pull-left">
                                <a href="index-2.html" class="btn_kr btn_lang is-active">
                                    KR
                                </a>
                                <a href="en/index.html" class="btn_en btn_lang">
                                    EN
                                </a>
                                <a href="jp/index.html" class="btn_en btn_lang">
                                    JP
                                </a>
                                <a href="ch/index.html" class="btn_en btn_lang">
                                    CH
                                </a>
                            </div>
                        </li>
                        <li class="nav_item">
                            <a href="index-2.html#qna" class="nav_link" data-nav=".qna">
                                문의하기
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <div id="news_wrapper">
        <div class="contents_top">
            <div class="news_h1 media_h1">
                <h1>MEDIA</h1>
            </div>
            <div class="news_search">
                <div class="search-container">
                    <button type="button" id="searchBtn" style="width: 35px; height: 35px;"><img src="icon_search.png" alt=""></button>
                    <input type="text" placeholder="검색어를 입력해주세요" id="searchStr" name="search"
                           style="width: 250px; height: 35px;">
                </div>
            </div>
        </div>
        <div class="contents_bottom">
            <ul class="contents_bottom_box" id="mediaUl">
            </ul>
            <div class="dim-layer">
                <div class="dimBg"></div>
                <div id="layer2" class="pop-layer">
                    <div class="btn-r">
                        <a href="#" class="btn-layerClose">X</a>
                    </div>
                    <div class="pop-container">
                        <div class="pop-conts video-container">
                            <!--content //-->
                            <iframe class="myFrame"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen></iframe>
                            <!--// content-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="pg_contents">
                <ul class="pg_btn" id="pageUl">
                </ul>
            </div>
            <div class="more_media"><a href="https://www.youtube.com/user/yapappkr" target="_blank"><p>More On Youtube
                <img src="btn_next.png" class="btn_img" alt="more button"></p></a></div>
        </div>
    </div>
    <footer> <!-- 본문 푸터 -->
        <address><strong>(주)얍컴퍼니</strong> 서울특별시 종로구 율곡로 88, 삼환빌딩 10F</address>
        <p class="copyright">
            <small>Copyright &copy; YAP All rights reserved.</small>
        </p>
    </footer>
</div>
<script type="text/javascript">
    $(function () {
        var sBtn = $(".pg_btn");   //  ul > li 이를 sBtn으로 칭한다. (클릭이벤트는 li에 적용 된다.)
        var activeBtn = $(".pg_btn a strong");
        var nextBtn = $(".btn_next");
        var prevBtn = $(".btn_prev");
        sBtn.find("a strong").click(function () { // sBtn에 속해 있는  a 찾아 클릭 하면.
            activeBtn.removeClass("btn_active");     // sBtn 속에 (active) 클래스를 삭제 한다.
            $(this).addClass("btn_active"); // 클릭한 a에 (active)클래스를 넣는다.
        });
    });

    var apiUrl = 'https://dev-app.yap.net/homp/';
    var nowPage = '';

    $(document).ready(function () {
        
        getMediaList();
        
        $("#searchBtn").on("click", function () {
            var keyword = $("#searchStr").val();
            getMediaList(1, keyword);
        });
        
        $("#searchStr").keypress(function (key) {
            if (key.keyCode == 13) {
                var keyword = $("#searchStr").val();
                getMediaList(1, keyword);
            }
        });
    });

    function getMediaList(page, keyword) {
        var xhr = new XMLHttpRequest();
        var fd = new FormData();

        if (page == null || page == '') {
            page = 1;
        }

        if (keyword == null || keyword == '') {
            keyword = "";
        }

        $("#searchStr").val(keyword);

        nowPage = page;

        console.log(page);

        fd.append("page", page);
        fd.append("keyword", keyword);
        fd.append("listSize", 12);

        xhr.open('POST.html', apiUrl + 'getMediaList');
        xhr.addEventListener("load", makeDiv);
        xhr.send(fd);

        console.log(xhr);
    }

    function makeDiv() {
        console.log(nowPage);
        var list = JSON.parse(this.response);

        console.log(list);
        var mediaList = list.mediaList;
        var pageInfo = list.pageInfo;

        var div = '';
        var pageDiv = '';

        for (var i = 0; i < mediaList.length; i++) {
            var mediaUrl = mediaList[i].mediaUrl;

            var mediaId = mediaUrl.split("index.html")[3];    // 미디어 URL에서 맨 끝 id 값만 빼옴.

            // 다른 유형의 url이 들어온 경우
            if (mediaId.indexOf("watch?v=") > -1) {
                mediaId = mediaId.replace("watch?v=", "");
            }

            div += '<li onclick="javascript:setFrameSrc(\'' + mediaId + '\');">';
            div += '<div class="img_div">';
            div += '<img class="playOff play_btn" src="play_off.png">';
            div += '<img class="playOn play_btn" src="play_on.png"></div>';
            div += '<img src="' + mediaList[i].mediaImgUrl + '" alt="동영상 썸네일">';
            div += '<p class="pr_title">' + mediaList[i].mediaTitle + '</p>';
            div += '<p class="pr_date">' + mediaList[i].mediaRegYmd + '</p></li>';
        }

        console.log(pageInfo);

        var keyword = pageInfo.keyword;
        
        if (pageInfo.prev) {
            var prevRange = pageInfo.startPage - 1;

            pageDiv += '<li class="btn_box btn_prev"><a href="javascript:getMediaList(' + prevRange + ', \'' + keyword + '\')"  target=""><img src="btn_prev.png" class="btn_img" alt="previous button"> < Prev</a></li>';
        } else {
            $(".btn_prev").css("display", "none");
        }

        for (var i = pageInfo.startPage; i <= pageInfo.endPage; i++) {
            if (i == nowPage) {
                pageDiv += '<li><a href="javascript:getMediaList(' + i + ', \'' + keyword + '\')" class="btn_active"><strong>' + i + '</strong></a></li>';
            } else {
                pageDiv += '<li><a href="javascript:getMediaList(' + i + ', \'' + keyword + '\')"><strong>' + i + '</strong></a></li>';
            }
        }

        if (pageInfo.next) {
            var nextRange = pageInfo.endPage + 1;

            pageDiv += '<li class="btn_box btn_next"><a href="javascript:getMediaList(' + nextRange + ', \'' + keyword + '\')">Next <img src="btn_next.png" class="btn_img" alt="next button"></a></li>';
        }

        $("#mediaUl").html(div);
        $("#pageUl").html(pageDiv);
    }

    function setFrameSrc(mediaId) {
        $(".myFrame").attr("src", "https://www.youtube.com/embed/" + mediaId);

        layer_popup("#layer2");
    }

    function layer_popup(el) {
        var $el = $(el);        //레이어의 id를 $el 변수에 저장
        var isDim = $el.prev().hasClass('dimBg');   //dimmed 레이어를 감지하기 위한 boolean 변수

        isDim ? $('.dim-layer').fadeIn() : $el.fadeIn();

        var $elWidth = ~~($el.outerWidth()),
            $elHeight = ~~($el.outerHeight()),
            docWidth = $(document).width(),
            docHeight = $(document).height();

        // 화면의 중앙에 레이어를 띄운다.
        if ($elHeight < docHeight || $elWidth < docWidth) {
            $el.css({
                // marginTop: -$elHeight /2,
                // marginLeft: -$elWidth/2
            })
        } else {
            $el.css({top: 0, left: 0});
        }

        $el.find('a.btn-layerClose').click(function () {
            isDim ? $('.dim-layer').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
            $(".myFrame").attr("src", "");    // iframe내의 동영상 소스 초기화
            return false;
        });

        $('.layer .dimBg').click(function () {
            $('.dim-layer').fadeOut();
            $(".myFrame").attr("src", "");    // iframe내의 동영상 소스 초기화
            return false;
        });
    }
</script>
</body>

<!-- Mirrored from biz.yap.net/media.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 03 Jul 2023 02:48:46 GMT -->
</html>